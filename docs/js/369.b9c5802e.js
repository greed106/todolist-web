"use strict";(self["webpackChunksecondvue"]=self["webpackChunksecondvue"]||[]).push([[369],{4369:function(e,s,t){t.r(s),t.d(s,{default:function(){return f}});var r=function(){var e=this,s=e._self._c;return s("div",{staticClass:"register-container"},[s("UserRegister")],1)},i=[],a=function(){var e=this,s=e._self._c;return s("div",{staticClass:"register-container"},[s("h2",[e._v("注册")]),s("el-form",{ref:"registerForm",staticClass:"register-form",attrs:{model:e.registerForm},nativeOn:{submit:function(s){return s.preventDefault(),e.validateAndRegister.apply(null,arguments)}}},[s("el-form-item",{staticClass:"form-item",attrs:{label:"用户名:"}},[s("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.registerForm.username,callback:function(s){e.$set(e.registerForm,"username",s)},expression:"registerForm.username"}}),s("span",{staticClass:"hint-text"},[e._v("（用户名是您的唯一身份标识）")])],1),s("el-form-item",{staticClass:"form-item",attrs:{label:"密码:"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.registerForm.password,callback:function(s){e.$set(e.registerForm,"password",s)},expression:"registerForm.password"}}),s("span",{staticClass:"hint-text"},[e._v("（不要把密码告诉别人哦）")])],1),s("el-form-item",{staticClass:"form-item",attrs:{label:"确认密码:"}},[s("el-input",{attrs:{type:"password",placeholder:"请再次输入密码"},model:{value:e.registerForm.confirmPassword,callback:function(s){e.$set(e.registerForm,"confirmPassword",s)},expression:"registerForm.confirmPassword"}}),s("span",{staticClass:"hint-text"},[e._v("（两次密码输入要一致哦）")])],1),s("el-form-item",{staticClass:"form-item",attrs:{label:"电子邮箱:"}},[s("el-input",{attrs:{placeholder:"请输入电子邮箱"},model:{value:e.registerForm.email,callback:function(s){e.$set(e.registerForm,"email",s)},expression:"registerForm.email"}}),s("span",{staticClass:"hint-text"},[e._v("（我们会向您的邮箱中发送一封邮件以验证您的身份）")])],1),s("el-form-item",{staticClass:"form-item"},[s("el-button",{staticClass:"register-button",attrs:{type:"primary","native-type":"submit"}},[e._v("注册")])],1)],1),e.showTokenModal?s("div",{staticClass:"token-modal"},[s("div",{staticClass:"modal-content"},[s("h3",[e._v("请输入您收到的验证令牌")]),s("el-input",{staticClass:"token-input",attrs:{placeholder:"验证令牌"},model:{value:e.registerForm.jwt,callback:function(s){e.$set(e.registerForm,"jwt",s)},expression:"registerForm.jwt"}}),s("div",{staticClass:"modal-buttons"},[s("el-button",{staticClass:"common-button",on:{click:function(s){e.showTokenModal=!1}}},[e._v("取消")]),s("el-button",{staticClass:"common-button",on:{click:e.completeRegistration}},[e._v("提交")])],1)],1)]):e._e()],1)},o=[],n=(t(7658),t(8499)),l={name:"UserRegister",data(){return{showTokenModal:!1,registerForm:{username:"",password:"",confirmPassword:"",email:"",jwt:""}}},methods:{async validateAndRegister(){const e=n.Loading.service({fullscreen:!0});try{if(!this.registerForm.username)return void this.$message.error("请填写用户名");if(!this.registerForm.password)return void this.$message.error("请填写密码");if(!this.registerForm.confirmPassword)return void this.$message.error("请确认密码");if(!this.registerForm.email)return void this.$message.error("请填写电子邮箱");if(this.registerForm.password!==this.registerForm.confirmPassword)return void this.$message.error("两次密码输入不一致");const e=await this.$axios.post("https://greed106.conc.tech/todolist/register/valid",{username:this.registerForm.username,email:this.registerForm.email});if(1!==e.data.code)return void this.$message.error(e.data.msg);this.showTokenModal=!0}catch(s){this.$message.error(s.response?s.response.data.msg:s.message)}finally{e.close()}},async completeRegistration(){const e=n.Loading.service({fullscreen:!0});try{const e=await this.$axios.post("https://greed106.conc.tech/todolist/register/code",{username:this.registerForm.username,password:this.registerForm.password,email:this.registerForm.email,jwt:this.registerForm.jwt});1===e.data.code?(this.$message.success("注册成功"),this.$router.push("/login")):this.$message.error(e.data.msg)}catch(s){this.$message.error(s.response?s.response.data.msg:s.message)}finally{e.close(),this.showTokenModal=!1}}}},m=l,c=t(1001),d=(0,c.Z)(m,a,o,!1,null,"71a8ca85",null),u=d.exports,g={name:"RegisterView",components:{UserRegister:u}},h=g,p=(0,c.Z)(h,r,i,!1,null,null,null),f=p.exports}}]);
//# sourceMappingURL=369.b9c5802e.js.map